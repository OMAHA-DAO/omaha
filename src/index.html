<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ThreeJS Starter</title>
    <style>
        .controls{display: flex;gap:1rem;position: absolute;z-index: 3;top:0;right:0;}
    </style>
</head>
<body style="background-color:#000;">
    <script type="x-shader/x-vertex" id="vertexShaderZoom">
        varying vec2 vUv;
            void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
    </script>
    
    <script type="x-shader/x-fragment" id="fragmentShaderZoom">
    uniform sampler2D tDiffuse;
    uniform vec2 center;
    uniform float strength;
    uniform vec2 resolution;
    varying vec2 vUv;
    
    float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}
    
    void main(){
        vec4 color=vec4(0.0);
        float total=0.0;
        vec2 toCenter=center-vUv*resolution;
        float offset=random(vec3(12.9898,78.233,151.7182),0.0);
        for(float t=0.0;t<=40.0;t++){
            float percent=(t+offset)/40.0;
            float weight=4.0*(percent-percent*percent);
            vec4 sample_=texture2D(tDiffuse,vUv+toCenter*percent*strength/resolution);
            sample_.rgb*=sample_.a;
            color+=sample_*weight;
            total+=weight;
        }
        gl_FragColor=color/total;
        gl_FragColor.rgb/=gl_FragColor.a+0.00001;
    }
    </script>
    <div class="controls">
        <button data-counter="1">1</button>
        <button data-counter="2">2</button>
        <button data-counter="3">3</button>
        <button data-counter="4">4</button>
        <button data-counter="5">5</button>
        <button data-counter="6">6</button>
    </div>
    <canvas class="webgl2"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha512-z4OUqw38qNLpn1libAN9BsoDx6nbNFio5lA6CuTp9NlK83b89hgyCVq+N5FdBJptINztxn1Z3SaKSKUS5UP60Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        (()=>{
            const d=document;
            const btn=d.querySelectorAll('.controls button');
            btn.forEach(e=>{
                e.addEventListener('click',()=>{
                    if(window.customFunc!==undefined)window.customFunc(e.dataset.counter)
                })
            })
        })()
    </script>
</body>
</html>